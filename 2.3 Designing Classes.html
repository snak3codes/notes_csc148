
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- common.css -->
      <style>* {-webkit-tap-highlight-color: rgba(0,0,0,0);}html {-webkit-text-size-adjust: none;}body {font-family: -apple-system, Helvetica, Arial, sans-serif;margin: 0;padding: 20px;color: #333;word-wrap: break-word;}h1, h2, h3, h4, h5, h6 {line-height: 1.1;}img {max-width: 100% !important;height: auto;}blockquote {margin: 0;padding: 0 15px;color: #777;border-left: 4px solid #ddd;}hr {background-color: #ddd;border: 0;height: 1px;margin: 15px 0;}code {font-family: Menlo, Consolas, 'Ubuntu Mono', Monaco, 'source-code-pro', monospace;line-height: 1.4;margin: 0;padding: 0.2em 0;font-size: 90%;background-color: rgba(0,0,0,0.04);border-radius: 3px;}pre > code {margin: 0;padding: 0;font-size: 100%;word-break: normal;background: transparent;border: 0;}ol {list-style-type: decimal;}ol ol, ul ol {list-style-type: lower-latin;}ol ol ol, ul ol ol, ul ul ol, ol ul ol {list-style-type: lower-roman;}table {border-spacing: 0;border-collapse: collapse;margin-top: 0;margin-bottom: 16px;}table th {font-weight: bold;}table th, table td {padding: 6px 13px;border: 1px solid #ddd;}table tr {border-top: 1px solid #ccc;}table tr:nth-child(even) {background-color: #f8f8f8;}input[type="checkbox"] {cursor: default;margin-right: 0.5em;font-size: 13px;}.task-list-item {list-style-type: none;}.task-list-item+.task-list-item {margin-top: 3px;}.task-list-item input {float: left;margin: 0.3em 1em 0.25em -1.6em;vertical-align: middle;}#tag-field {margin: 8px 2px 10px;}#tag-field .tag {display: inline-block;background: #cadff3;border-radius: 4px;padding: 1px 8px;color: black;font-size: 12px;margin-right: 10px;line-height: 1.4;}</style>
      <!-- ace-static.css -->
      <style>.ace_static_highlight {white-space: pre-wrap;}.ace_static_highlight .ace_gutter {width: 2em;text-align: right;padding: 0 3px 0 0;margin-right: 3px;}.ace_static_highlight.ace_show_gutter > .ace_line {padding-left: 2.6em;}.ace_static_highlight .ace_line {position: relative;}.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;top: 0;bottom: 0;left: 0;position: absolute;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}</style>
      <style>.ace-chrome .ace_gutter {background: #ebebeb;color: #333;overflow : hidden;}.ace-chrome .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-chrome {background-color: #FFFFFF;color: black;}.ace-chrome .ace_cursor {color: black;}.ace-chrome .ace_invisible {color: rgb(191, 191, 191);}.ace-chrome .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-chrome .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-chrome .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-chrome .ace_invalid {background-color: rgb(153, 0, 0);color: white;}.ace-chrome .ace_fold {}.ace-chrome .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-chrome .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-chrome .ace_support.ace_type,.ace-chrome .ace_support.ace_class.ace-chrome .ace_support.ace_other {color: rgb(109, 121, 222);}.ace-chrome .ace_variable.ace_parameter {font-style:italic;color:#FD971F;}.ace-chrome .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-chrome .ace_comment {color: #236e24;}.ace-chrome .ace_comment.ace_doc {color: #236e24;}.ace-chrome .ace_comment.ace_doc.ace_tag {color: #236e24;}.ace-chrome .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-chrome .ace_variable {color: rgb(49, 132, 149);}.ace-chrome .ace_xml-pe {color: rgb(104, 104, 91);}.ace-chrome .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-chrome .ace_heading {color: rgb(12, 7, 255);}.ace-chrome .ace_list {color:rgb(185, 6, 144);}.ace-chrome .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-chrome .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-chrome .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-chrome .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-chrome .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-chrome .ace_gutter-active-line {background-color : #dcdcdc;}.ace-chrome .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-chrome .ace_storage,.ace-chrome .ace_keyword,.ace-chrome .ace_meta.ace_tag {color: rgb(147, 15, 128);}.ace-chrome .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-chrome .ace_string {color: #1A1AA6;}.ace-chrome .ace_entity.ace_other.ace_attribute-name {color: #994409;}.ace-chrome .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}</style>
      <!-- export.css -->
      <style>
        body{margin:0 auto;max-width:800px;line-height:1.4}
        #nav{margin:5px 0 10px;font-size:15px}
        #titlearea{border-bottom:1px solid #ccc;font-size:17px;padding:10px 0;}
        #contentarea{font-size:15px;margin:16px 0}
        .cell{outline:0;min-height:20px;margin:5px 0;padding:5px 0;}
        .code-cell{font-family:Menlo,Consolas,'Ubuntu Mono',Monaco,'source-code-pro',monospace;font-size:12px;}
        .latex-cell{white-space:pre-wrap;}
      </style>
      <!-- User CSS -->
      <style> .text-cell {font-size: 15px;}.code-cell {font-size: 12px;}.markdown-cell {font-size: 15px;}.latex-cell {font-size: 15px;}</style>
    </head>
    <body>
      <div id="nav"><div>Next: <a href='2.4 Inheritance  Introduction and Methods.html'>2.4 Inheritance: Introduction and Methods</a>, Previous: <a href='2.2 Representation Invariants.html'>2.2 Representation Invariants</a>, Up: <a href='index.html'>Index</a></div></div>
      <div id="titlearea">
        <h2>2.3 Designing Classes</h2>
      </div>
      <div id="contentarea"><div class="cell text-cell"><p>We have now introduced three elements of a class:</p>
<ul>
<li>instance attributes (data)</li>
<li>methods (operations)</li>
<li>representation invariants (properties)</li>
</ul>
<p>Now that we understand the basic mechanics of classes, it’s time to think about the <em>design</em> of classes. In fact, there are a whole host of design questions that you’ll face when designing object-oriented programs. To help guide you in this process, we have prepared a <a href="https://mcs.utm.utoronto.ca/~148/notes/object-oriented-programming/class_design_recipe.pdf">Class Design Recipe</a>, which serves an analogous role to the Function Design Recipe from CSC108. This is a reference document that you aren’t required to follow explicitly, but will be a helpful way to guide your thinking when designing your own classes.</p>
</div><div class="cell text-cell"><h2>Information Hiding</h2>
<p>The fundamental themes of the Class Design Recipe are <em>design before coding</em> and <em>information hiding</em>. Just as a great deal of thought goes into precisely specifying the purpose and expected behaviour of a function before you implement it, so too do you have to think about the <em>design</em> of a class before implementing even a single method.</p>
<p>The relationship between the author and client of a class plays a powerful and subtle role in class design. When we design a class, we must think about <em>how another person would use this class</em>. In other words, we design a class to be used by others, whether it’s other team members, colleagues on a different project, or even ourselves when we are writing new code months or years into the future (and only vaguely recall writing the class in the first place). And one of the biggest desires of “other users” is to be able to use our class without having to know at all how it works.</p>
<p>Designing classes by separating the public interface of the class from the private implementation details is known as <strong>information hiding</strong>, and is one of the fundamental elements of object-oriented programming. One of the biggest advantages of designing our programs in this way is that after our initial implementation, we can feel free to modify it (e.g., add new features or make it more efficient) without disturbing the public interface, and rest assured that this doesn’t affect other code that might be using this class.</p>
<p>Unfortunately, this course is too small in scope to give you the opportunity to write code for other people, although do keep in mind that you’re always writing your code for your future self. We’ll encourage you to follow the Class Design Recipe and think carefully about a clear separation between what one needs to know to <em>implement</em> a class and what information one needs to know to <em>use</em> that class.</p>
</div><div class="cell text-cell"><h2>Private-ness in Python</h2>
<p>As we have already discussed, the Class Design Recipe places a great emphasis on the distinction between the public interface of a class and its private implementation. So far, the focus has been on using <em>documentation</em> to define a clear interface: explicitly writing a good class docstring with all public attributes of the class clearly documented, and method docstrings that describe the operations the class supports. In this section, we’ll discuss another important way to document the attributes and methods that we want to keep private, and then go over pitfalls concerning the very concept of “private-ness” in Python.</p>
<h3>Leading underscores</h3>
<p>An extremely common Python naming convention is to name anything that is considered private with a <strong>leading underscore</strong>. An underscore on an instance attribute indicates to a programmer writing client code that they should not access the instance variable: They should not use its value, and they certainly shouldn’t change it.</p>
<p>We can not not only mark attributes as private, but methods as well. What would be the point of a method that client code shouldn’t call? It could be a private helper for one of the methods that client code <em>is</em> welcome to call.</p>
<h3>Python’s “we’re all adults” philosophy</h3>
<p>In other programming languages, when we declare restrictions on which attributes can be accessed outside the class and which cannot, they are enforced as part of the language itself. In Java, for example, attempting to access or modify an attribute that has been marked as private leads to an error that prevents the program from running at all.</p>
<p>The Python language takes a different approach to private attributes and methods, which is informed by one of its core philosophies: “We’re all adults here.” The idea is that the language gives its programmers a great deal of freedom when writing code—including allowing programmers to access private attributes and methods of classes from outside the class. While there are some Python language mechanisms for performing further restriction on access, they are beyond the scope of the course, and they are weak mechanisms that can be circumvented.</p>
<p>As a result of the Python philosophy, if someone else wants to use your class, they are ultimately responsible for using it “properly.” And if they do not, well, they’re an adult; if they access a private attribute or method, they should be aware that this might lead to unexpected or disappointing results.</p>
<p>This permissiveness doesn’t mean that we give up on private attributes or methods altogether. Our previous discussion about the philosophy of public vs. private is still valid, and indeed respected by Python programmers. It just means that it is absolutely vital in Python to write good documentation and follow coding conventions. In particular, this is why it is not enough to implement methods so that they enforce our desired representation invariants. Because a programmer may wish to access and mutate instance attributes directly, our representation invariants must be carefully documented so that the programmer knows (and is responsible for maintaining) these invariants.</p>
<p>This way, we give the users of our class enough information to use it the way we intended, and alert them to the things they should <em>not</em> do. And if the user ignores our documentation? That’s up to them, risks and all.</p>
</div><div class="cell text-cell"><h2>Combining classes: composition</h2>
<p>A class is almost never defined and used in isolation. It is much more often the case that it belongs to a large collection of classes, which are all related to each other in various ways. One fundamental type of relationship between two classes occurs when the instances of one class have an attribute which refers to one or more instances of the other class.</p>
<p>A <code>User</code> object might have a list of <code>Tweet</code>s as an attribute. Colloquially, we say that a User “has some” Tweets.</p>
</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span> <span class="ace_identifier">User</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_string">"""A Twitter user.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_string">    === Attributes ===</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_string">    userid: the userid of this Twitter user.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_string">    bio: the bio of this Twitter user.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_string">    tweets: the tweets that this user has made.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_string">    """</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment"># Attribute types</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">userid</span>: <span class="ace_support ace_function">str</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">bio</span>: <span class="ace_support ace_function">str</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">tweets</span>: <span class="ace_identifier">List</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">Tweet</span><span class="ace_paren ace_rparen">]</span>
</div></div></div></div><div class="cell text-cell"><p>This type of relationship between classes is called <strong>composition</strong>, and appears all the time in object-oriented programming, because it arises so naturally. Whenever we have two classes, and one refers to instances of the other, that’s composition!</p>
<p>It is also the case that two classes might be related by composition in more than one way. For example, we might change <code>Tweet</code> so that it has an instance attribute <code>user</code> of type <code>User</code>, rather than just a string for the user’s id. We could even add an extra attribute <code>original_creator</code> of type <code>User</code> as well, representing the distinction between the user who originally wrote the tweet, and another user who retweets it.</p>
</div><div class="cell text-cell"><h2>Modelling with classes</h2>
<p>A common programming task is to take an English description of a problem and design classes that model the problem. The main idea is that the class(es) should correspond to the most important noun(s) in the problem, the attributes should be the information (other nouns or adjectives) associated with these noun(s), and the methods correspond to the verbs.</p>
<p>Here are a few examples for you to try out.</p>
<h3>People</h3>
<p>We’d like to create a simple model of a person. A person normally can be identified by their name, but might commonly be asked about her age (in years). We want to be able to keep track of a person’s mood throughout the day: happy, sad, tired, etc. Every person also has a favourite food: when she eats that food, her mood becomes <code>'ecstatic'</code>. And though people are capable of almost anything, we’ll only model a few other actions that people can take: changing their name, and greeting another person with the phrase <code>'Hi ____, it's nice to meet you! I'm ____.’</code></p>
<h3>Rational Numbers</h3>
<p>It’s slightly annoying for math people to use Python, because fractions are always converted to decimals and rounded, rather than kept in exact form. Let’s fix that! A rational number consists of a numerator and denominator; the denominator cannot be 0. Rational numbers are written like 7/8. Typical operations include determining whether the rational is positive, adding two rationals, multiplying two rationals, comparing two rationals, and converting a rational to a string.</p>
<h3>Restaurant recommendation</h3>
<p>We want to build an app which makes restaurant recommendations for a group of friends going out for a meal. Each person has a name, current location, dietary restrictions, and some ratings and comments for existing restaurants. Each restaurant has a name, a menu from which one can determine what dishes accommodate what dietary restrictions, and a location. The recommendation system, in addition to actually making recommendations, should be able to report statistics like the number of times a certain person has used the system, the number of times it has recommended each restaurant, and the last recommendation made for a given group of people.</p>
</div></div>
      <script>document.body.onkeyup = function(e) {
if (e.keyCode === 39) window.location.href = '2.4 Inheritance  Introduction and Methods.html';
if (e.keyCode === 37) window.location.href = '2.2 Representation Invariants.html';
}</script>
    </body>
    </html>
  