
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- common.css -->
      <style>* {-webkit-tap-highlight-color: rgba(0,0,0,0);}html {-webkit-text-size-adjust: none;}body {font-family: -apple-system, Helvetica, Arial, sans-serif;margin: 0;padding: 20px;color: #333;word-wrap: break-word;}h1, h2, h3, h4, h5, h6 {line-height: 1.1;}img {max-width: 100% !important;height: auto;}blockquote {margin: 0;padding: 0 15px;color: #777;border-left: 4px solid #ddd;}hr {background-color: #ddd;border: 0;height: 1px;margin: 15px 0;}code {font-family: Menlo, Consolas, 'Ubuntu Mono', Monaco, 'source-code-pro', monospace;line-height: 1.4;margin: 0;padding: 0.2em 0;font-size: 90%;background-color: rgba(0,0,0,0.04);border-radius: 3px;}pre > code {margin: 0;padding: 0;font-size: 100%;word-break: normal;background: transparent;border: 0;}ol {list-style-type: decimal;}ol ol, ul ol {list-style-type: lower-latin;}ol ol ol, ul ol ol, ul ul ol, ol ul ol {list-style-type: lower-roman;}table {border-spacing: 0;border-collapse: collapse;margin-top: 0;margin-bottom: 16px;}table th {font-weight: bold;}table th, table td {padding: 6px 13px;border: 1px solid #ddd;}table tr {border-top: 1px solid #ccc;}table tr:nth-child(even) {background-color: #f8f8f8;}input[type="checkbox"] {cursor: default;margin-right: 0.5em;font-size: 13px;}.task-list-item {list-style-type: none;}.task-list-item+.task-list-item {margin-top: 3px;}.task-list-item input {float: left;margin: 0.3em 1em 0.25em -1.6em;vertical-align: middle;}#tag-field {margin: 8px 2px 10px;}#tag-field .tag {display: inline-block;background: #cadff3;border-radius: 4px;padding: 1px 8px;color: black;font-size: 12px;margin-right: 10px;line-height: 1.4;}</style>
      <!-- ace-static.css -->
      <style>.ace_static_highlight {white-space: pre-wrap;}.ace_static_highlight .ace_gutter {width: 2em;text-align: right;padding: 0 3px 0 0;margin-right: 3px;}.ace_static_highlight.ace_show_gutter > .ace_line {padding-left: 2.6em;}.ace_static_highlight .ace_line {position: relative;}.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;top: 0;bottom: 0;left: 0;position: absolute;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}</style>
      <style>.ace-chrome .ace_gutter {background: #ebebeb;color: #333;overflow : hidden;}.ace-chrome .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-chrome {background-color: #FFFFFF;color: black;}.ace-chrome .ace_cursor {color: black;}.ace-chrome .ace_invisible {color: rgb(191, 191, 191);}.ace-chrome .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-chrome .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-chrome .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-chrome .ace_invalid {background-color: rgb(153, 0, 0);color: white;}.ace-chrome .ace_fold {}.ace-chrome .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-chrome .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-chrome .ace_support.ace_type,.ace-chrome .ace_support.ace_class.ace-chrome .ace_support.ace_other {color: rgb(109, 121, 222);}.ace-chrome .ace_variable.ace_parameter {font-style:italic;color:#FD971F;}.ace-chrome .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-chrome .ace_comment {color: #236e24;}.ace-chrome .ace_comment.ace_doc {color: #236e24;}.ace-chrome .ace_comment.ace_doc.ace_tag {color: #236e24;}.ace-chrome .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-chrome .ace_variable {color: rgb(49, 132, 149);}.ace-chrome .ace_xml-pe {color: rgb(104, 104, 91);}.ace-chrome .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-chrome .ace_heading {color: rgb(12, 7, 255);}.ace-chrome .ace_list {color:rgb(185, 6, 144);}.ace-chrome .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-chrome .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-chrome .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-chrome .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-chrome .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-chrome .ace_gutter-active-line {background-color : #dcdcdc;}.ace-chrome .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-chrome .ace_storage,.ace-chrome .ace_keyword,.ace-chrome .ace_meta.ace_tag {color: rgb(147, 15, 128);}.ace-chrome .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-chrome .ace_string {color: #1A1AA6;}.ace-chrome .ace_entity.ace_other.ace_attribute-name {color: #994409;}.ace-chrome .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}</style>
      <!-- export.css -->
      <style>
        body{margin:0 auto;max-width:800px;line-height:1.4}
        #nav{margin:5px 0 10px;font-size:15px}
        #titlearea{border-bottom:1px solid #ccc;font-size:17px;padding:10px 0;}
        #contentarea{font-size:15px;margin:16px 0}
        .cell{outline:0;min-height:20px;margin:5px 0;padding:5px 0;}
        .code-cell{font-family:Menlo,Consolas,'Ubuntu Mono',Monaco,'source-code-pro',monospace;font-size:12px;}
        .latex-cell{white-space:pre-wrap;}
      </style>
      <!-- User CSS -->
      <style> .text-cell {font-size: 15px;}.code-cell {font-size: 12px;}.markdown-cell {font-size: 15px;}.latex-cell {font-size: 15px;}</style>
    </head>
    <body>
      <div id="nav"><div>Next: <a href='4.1 Introduction to Linked Lists.html'>4.1 Introduction to Linked Lists</a>, Previous: <a href='3.3 Exceptions.html'>3.3 Exceptions</a>, Up: <a href='index.html'>Index</a></div></div>
      <div id="titlearea">
        <h2>3.4 Analysis Program Running Time</h2>
      </div>
      <div id="contentarea"><div class="cell text-cell"><p>Here is an alternate way of implementing the Stack ADT based on lists, using the <em>front</em> of the list to represent the top of the stack.</p>
</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span> <span class="ace_identifier">Stack2</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_string">"""Alternate stack implementation.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_string">    This implementation uses the *front* of the Python list to represent</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_string">    the top of the stack.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_string">    """</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment"># === Private Attributes ===</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment"># _items:</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">#     The items stored in the stack. The front of the list represents</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment">#     the top of the stack.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">_items</span>: <span class="ace_identifier">List</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">def</span> <span class="ace_identifier">__init__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword ace_operator">-&gt;</span> <span class="ace_constant ace_language">None</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_string">"""Initialize a new empty stack."""</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">self</span>.<span class="ace_identifier">_items</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">def</span> <span class="ace_identifier">is_empty</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword ace_operator">-&gt;</span> <span class="ace_support ace_function">bool</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_string">"""Return whether this stack contains no items.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_string">    &gt;&gt;&gt; s = Stack()</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_string">    &gt;&gt;&gt; s.is_empty()</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_string">    True</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_string">    &gt;&gt;&gt; s.push('hello')</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_string">    &gt;&gt;&gt; s.is_empty()</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_string">    False</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_string">    """</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">return</span> <span class="ace_identifier">self</span>.<span class="ace_identifier">_items</span> <span class="ace_keyword ace_operator">==</span> <span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">def</span> <span class="ace_identifier">push</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>, <span class="ace_identifier">item</span>: <span class="ace_identifier">Any</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword ace_operator">-&gt;</span> <span class="ace_constant ace_language">None</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_string">"""Add a new element to the top of this stack."""</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">self</span>.<span class="ace_identifier">_items</span>.<span class="ace_identifier">insert</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">0</span>, <span class="ace_identifier">item</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">def</span> <span class="ace_identifier">pop</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword ace_operator">-&gt;</span> <span class="ace_identifier">Any</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_string">"""Remove and return the element at the top of this stack.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_string">    Raise an EmptyStackError if this stack is empty.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_string">    &gt;&gt;&gt; s = Stack()</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_string">    &gt;&gt;&gt; s.push('hello')</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_string">    &gt;&gt;&gt; s.push('goodbye')</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_string">    &gt;&gt;&gt; s.pop()</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_string">    'goodbye'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_string">    """</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">if</span> <span class="ace_identifier">self</span>.<span class="ace_identifier">is_empty</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">raise</span> <span class="ace_identifier">EmptyStackError</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">else</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">return</span> <span class="ace_identifier">self</span>.<span class="ace_identifier">_items</span>.<span class="ace_identifier">pop</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">0</span><span class="ace_paren ace_rparen">)</span>
</div></div></div></div><div class="cell text-cell"><p>Even though this implementation seems to be conceptually the same as the first (one uses the back of the list, the other uses the front), it turns out their runtime performance is quite different!</p>
</div><div class="cell text-cell"><h2>A simple time profiler</h2>
<p>By making use of a built-in Python library called <code>timeit</code>, we can easily get rough estimates of how long our code takes to run. The key function we import is called <code>timeit</code>,&nbsp;which takes in a piece of Python code to execute, and returns a float representing the amount of time it took to execute it. We illustrate the use of the <code>timeit</code> function in the following example:</p>
</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">def</span> <span class="ace_identifier">push_and_pop</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">s</span>: <span class="ace_identifier">Stack</span><span class="ace_paren ace_rparen">)</span> <span class="ace_keyword ace_operator">-&gt;</span> <span class="ace_constant ace_language">None</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_string">"""Push and pop a single item onto &lt;stack&gt;.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_string">    This is simply a helper for the main timing experiment.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_string">    """</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">s</span>.<span class="ace_identifier">push</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">1</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">s</span>.<span class="ace_identifier">pop</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">if</span> <span class="ace_identifier">__name__</span> <span class="ace_keyword ace_operator">==</span> <span class="ace_string">'__main__'</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment"># Import the main timing function.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">from</span> <span class="ace_identifier">timeit</span> <span class="ace_keyword">import</span> <span class="ace_identifier">timeit</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment"># The stack sizes we want to try.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_identifier">STACK_SIZES</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_numeric">1000</span>, <span class="ace_constant ace_numeric">10000</span>, <span class="ace_constant ace_numeric">100000</span>, <span class="ace_constant ace_numeric">1000000</span>, <span class="ace_constant ace_numeric">10000000</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_keyword">for</span> <span class="ace_identifier">stack_size</span> <span class="ace_keyword">in</span> <span class="ace_identifier">STACK_SIZES</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment"># Uncomment the stack implementation that we want to time.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">stack</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">Stack</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment"># stack = Stack2()</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment"># Bypass the Stack interface to create a stack of size &lt;stack_size&gt;.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment"># This speeds up the experiment, but we know this violates encapsulation!</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">stack</span>.<span class="ace_identifier">_items</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_support ace_function">list</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">range</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">stack_size</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment"># Call push_and_pop(stack) 1000 times, and store the time taken in &lt;time&gt;.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment"># The globals=globals() is used for a technical reason that you can ignore.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_identifier">time</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">timeit</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'push_and_pop(stack)'</span>, <span class="ace_identifier">number</span><span class="ace_keyword ace_operator">=</span><span class="ace_constant ace_numeric">1000</span>, <span class="ace_support ace_function">globals</span><span class="ace_keyword ace_operator">=</span><span class="ace_support ace_function">globals</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment"># Finally, report the result. The :&gt;8 is used to right-align the stack size</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_comment"># when it's printed, leading to a more visually-pleasing report.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">    </span>    <span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">f</span><span class="ace_string">'Stack size {stack_size:&gt;8}, time {time}'</span><span class="ace_paren ace_rparen">)</span>
</div></div></div></div><div class="cell text-cell"><p>Running this code on a <code>Stack</code> and a <code>Stack2</code> instance illustrates a stark difference between these two classes. While the <code>Stack</code> instance seems to take the <strong>same</strong> amount of time per operation regardless of how many items are on the stack, the <code>Stack2</code> class seems to have the amount of time grow with the number of items on the stack. In fact, the amount of time required in a <code>Stack2</code> operation is roughly proportional to the size of the stack, while the amount of time required in <code>Stack</code> is <em>independent</em> of the size of the stack!</p>
</div><div class="cell text-cell"><h2>Memory allocation for lists in Python</h2>
<p>To understand why there’s such a dramatic difference, we really need to understand how Python lists are stored in memory.</p>
<p>Recall that a variable in Python stores a <em>reference</em> to an object. A Python list is a special type of object that contains an ordered sequence of references to other objects, which we call the elements of the list. Importantly, these references are stored in consecutive blocks of memory—just as we’ve been drawing them in our memory model diagrams so far. This is what makes accessing list elements so fast: getting the <em>i</em>-th list item can be done just by calculating its address (i.e., location in the computer’s memory), based on the address where the list starts, and offset by <em>i</em> addresses.</p>
<p>To preserve this characteristic, lists must always be contiguous; there can’t be any “gaps”, or else Python couldn’t calculate the memory address of the <em>i</em>-th list item. But this makes insertion and deletion less efficient: for an item to be deleted, all items after it have to be moved down one block in memory, and similarly, for insertion all items are moved up one block. We have a trade-off: we give up fast insertion and deletion in order to gain fast lookup by index.</p>
<p>There is one more important feature of Python lists that you should know, and it makes adding elements at the end of the list very fast: when you create a new list in Python, it actually allocates (assigns) more memory to the list than the list actually requires. If you create a list of 4 elements, you might get enough space to hold 8 elements. The exact numbers are implementation-specific and not important here; the general idea is that there is usually free space at the end of the list that the list can “expand” into. In particular, if you want to add an object to the end of the list, you can simply add a reference to it into that spot. On the other hand, if you want to add a new item to the list and there is no more free space, a new and larger chunk of memory is allocated for the list and every item is copied into it.</p>
<p>The net effect of these implementation details is that it’s much faster to add and remove at the end of the list than at its front! Adding at the end usually requires only expanding into the extra space; occasionally there won’t be any extra space left, and some time-consuming work has to be done. But on balance, adding at the end is much less time-consuming than adding at the beginning, which <em>always</em> requires shifting every element down a spot. (Removing items is analogous.) Now the reason for the speed difference in our stack example is clear!</p>
</div><div class="cell text-cell"><h2>Analysing algorithm running time</h2>
<p>In evaluating the quality of our programs, we have talked about two metrics so far. The first is correctness: does our code actually work, even in special corner cases, and handle errors appropriately? The second is design: is the code carefully designed, and well-documented so that it is easy to understand and work with by both clients and implementers of the code?</p>
<p>From what we’ve seen about the two different stack implementations, there is certainly another way in which we can determine the quality of our code: how quickly the code runs. We will now study how to assess the <strong>running time efficiency</strong> of our programs rigorously, and communicate these ideas with other computer scientists.</p>
</div><div class="cell text-cell"><h2>Observations about runtime</h2>
<p>First, recall that for most algorithms, their running time depends on the size of the input—as the input numbers or lists get larger, for example, we expect algorithms operating on them to increase as well. So when we measure efficiency, we really care about a <em>function</em> of the amount of time an algorithm takes to run in terms of the size of the input. We can write something like <em>T</em>(<em>n</em>) to denote the runtime of a function of size <em>n</em> (but note that this isn’t always necessarily <em>n</em>).</p>
<p>How best to measure runtime? We might try to use tools like the <code>timeit</code> function, but there are many factors that influence the time it takes for code to run: how powerful your machine is, how many other programs are running at the same time. As with Schrödinger’s cat, even the act of observing the runtime can affect performance!</p>
<p>What about the number of basic steps an algorithm takes? This is a bit better, but still subtly misleading: do all “basic” operations take the same amount of time? What counts as a basic operation? Etc. etc.</p>
<p>This is where Big-Oh comes in: it allows an elegant way of roughly characterizing the <em>type</em> of growth of the runtime of an algorithm, without actually worrying about things like how different CPUs implement different operations, whether a for loop is faster than a while loop, etc. Not that these things aren’t important—they are simply at another level of detail. There is no point fussing about this level of detail until we know the vastly larger kind of differences in growth rate that Big-Oh is designed to describe.</p>
<p>When we characterise the Big-Oh property of a function, we really are thinking about general terms like <em>linear</em>, <em>quadratic</em>, or <em>logarithmic</em> growth. For example, when we see a loop through a list like this:</p>
</div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">for</span> <span class="ace_identifier">item</span> <span class="ace_keyword">in</span> <span class="ace_identifier">lst</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_comment"># do something with item</span>
</div></div></div></div><div class="cell text-cell"><p>we know that the runtime is proportional to the length of the list. If the list gets twice as long, we’d expect this algorithm to take twice as long. The runtime grows linearly with the size of the list, and we write that the runtime is <em>O</em>(<em>n</em>), where <em>n</em> is the length of the list.</p>
</div><div class="cell text-cell"><h2>Ignoring constants, focusing on behaviour as problem size grows</h2>
<p>In CSC165/CSC240, you learn about the formal mathematical definition of Big-Oh notation, but this is not covered in this course. Intuitively, Big-Oh notation allows us to analyse the running time of algorithms while ignoring two details:</p>
<ol>
<li>The constants and lower-order terms involved in the step counting: 5<em>n</em>, <em>n</em> + 10, 19<em>n</em> − 10, 0.05<em>n</em> are all <em>O</em>(<em>n</em>)—they all have <em>linear</em> growth.</li>
<li>The algorithm’s running time on small inputs. The key idea here is that an algorithm’s behaviour as the input size gets very large is much more important than how quickly it runs on small inputs.</li>
</ol>
<p>Instead, Big-Oh notation allows us to capture how running time grows as the problem size grows. We say that Big-Oh deals with <em>asymptotic</em> runtime.</p>
<p>Note that these points mean that Big-Oh notation is not necessarily suitable for all purposes. For example, even though the sorting algorithm mergesort runs in time <em>O</em>(<em>n</em>log <em>n</em>) and the algorithm insertion sort runs in time <em>O</em>(<em>n</em>2), for small inputs (e.g., lists of size &lt;= 10), insertion sort runs significantly faster than mergesort in practice! And sometimes the constants are important too—even though yet another algorithm called quicksort is (on average) an <em>O</em>(<em>n</em>log <em>n</em>) algorithm, it has smaller constants than mergesort and so typically runs faster in practice. Neither of these practical observations are captured by the sorting algorithms’ respective Big-Oh classes!</p>
</div><div class="cell text-cell"><h2>Terminology and mathematical intuition</h2>
<p>Here is a table that summarizes some of the more common Big-Oh classes, and the English terminology that we use to describe their growth:</p>
</div><div class="cell text-cell"><table style="box-sizing: border-box; margin: 1em auto; padding: 0px; outline: none; caret-color: rgb(68, 68, 68); color: rgb(68, 68, 68); font-family: &quot;Open Sans&quot;, sans-serif; font-size: 19.200000762939453px;"><thead style="box-sizing: border-box; margin: 0px; padding: 0px;"><tr class="header" style="box-sizing: border-box; margin: 0px; padding: 0px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: lightgrey;"><th style="box-sizing: border-box; margin: 0px; padding: 8px; background-color: rgb(238, 238, 255); text-align: center; vertical-align: top; border-bottom-color: black;">Big-Oh</th><th style="box-sizing: border-box; margin: 0px; padding: 8px; background-color: rgb(238, 238, 255); text-align: center; vertical-align: top; border-bottom-color: black;">Growth term</th></tr></thead><tbody style="box-sizing: border-box; margin: 0px; padding: 0px;"><tr class="odd" style="box-sizing: border-box; margin: 0px; padding: 0px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: lightgrey;"><td style="box-sizing: border-box; margin: 0px; padding: 10px 8px; text-align: center; vertical-align: top; background-color: ivory;"><span class="math inline" style="box-sizing: border-box; margin: 0px; padding: 0px;"><em style="box-sizing: border-box; margin: 0px; padding: 0px;">O</em>(log <em style="box-sizing: border-box; margin: 0px; padding: 0px;">n</em>)</span></td><td style="box-sizing: border-box; margin: 0px; padding: 10px 8px; text-align: center; vertical-align: top; background-color: ivory;">logarithmic</td></tr><tr class="even" style="box-sizing: border-box; margin: 0px; padding: 0px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: lightgrey;"><td style="box-sizing: border-box; margin: 0px; padding: 10px 8px; text-align: center; vertical-align: top; background-color: ivory;"><span class="math inline" style="box-sizing: border-box; margin: 0px; padding: 0px;"><em style="box-sizing: border-box; margin: 0px; padding: 0px;">O</em>(<em style="box-sizing: border-box; margin: 0px; padding: 0px;">n</em>)</span></td><td style="box-sizing: border-box; margin: 0px; padding: 10px 8px; text-align: center; vertical-align: top; background-color: ivory;">linear</td></tr><tr class="odd" style="box-sizing: border-box; margin: 0px; padding: 0px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: lightgrey;"><td style="box-sizing: border-box; margin: 0px; padding: 10px 8px; text-align: center; vertical-align: top; background-color: ivory;"><span class="math inline" style="box-sizing: border-box; margin: 0px; padding: 0px;"><em style="box-sizing: border-box; margin: 0px; padding: 0px;">O</em>(<em style="box-sizing: border-box; margin: 0px; padding: 0px;">n</em><sup style="box-sizing: border-box; margin: 0px; padding: 0px;">2</sup>)</span></td><td style="box-sizing: border-box; margin: 0px; padding: 10px 8px; text-align: center; vertical-align: top; background-color: ivory;">quadratic</td></tr><tr class="even" style="box-sizing: border-box; margin: 0px; padding: 0px; border-bottom-style: none;"><td style="box-sizing: border-box; margin: 0px; padding: 10px 8px; text-align: center; vertical-align: top; background-color: ivory;"><span class="math inline" style="box-sizing: border-box; margin: 0px; padding: 0px;"><em style="box-sizing: border-box; margin: 0px; padding: 0px;">O</em>(2<sup style="box-sizing: border-box; margin: 0px; padding: 0px;"><em style="box-sizing: border-box; margin: 0px; padding: 0px;">n</em></sup>)</span></td><td style="box-sizing: border-box; margin: 0px; padding: 10px 8px; text-align: center; vertical-align: top; background-color: ivory;">exponential (with base 2)<br></td></tr></tbody></table></div><div class="cell text-cell"><p>Notice that we say growth is “exponential” when the variable is in the exponent, as in 2<em>n</em> (but not <em>n</em>2).</p>
<p>There is a very nice mathematical intuition that describes these classes too. Suppose we have an algorithm which has running time <em>N</em>0 when given an input of size <em>n</em>, and a running time of <em>N</em>1 on an input of size 2<em>n</em>. We can characterize the rates of growth in terms of the relationship between <em>N</em>0 and <em>N</em>1:</p>
</div><div class="cell text-cell"><table style="box-sizing: border-box; margin: 1em auto; padding: 0px; outline: none; caret-color: rgb(68, 68, 68); color: rgb(68, 68, 68); font-family: &quot;Open Sans&quot;, sans-serif; font-size: 19.200000762939453px;"><thead style="box-sizing: border-box; margin: 0px; padding: 0px;"><tr class="header" style="box-sizing: border-box; margin: 0px; padding: 0px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: lightgrey;"><th style="box-sizing: border-box; margin: 0px; padding: 8px; background-color: rgb(238, 238, 255); text-align: center; vertical-align: top; border-bottom-color: black;">Big-Oh</th><th style="box-sizing: border-box; margin: 0px; padding: 8px; background-color: rgb(238, 238, 255); text-align: center; vertical-align: top; border-bottom-color: black;">Relationship</th></tr></thead><tbody style="box-sizing: border-box; margin: 0px; padding: 0px;"><tr class="odd" style="box-sizing: border-box; margin: 0px; padding: 0px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: lightgrey;"><td style="box-sizing: border-box; margin: 0px; padding: 10px 8px; text-align: center; vertical-align: top; background-color: ivory;"><span class="math inline" style="box-sizing: border-box; margin: 0px; padding: 0px;"><em style="box-sizing: border-box; margin: 0px; padding: 0px;">O</em>(log <em style="box-sizing: border-box; margin: 0px; padding: 0px;">n</em>)</span></td><td style="box-sizing: border-box; margin: 0px; padding: 10px 8px; text-align: center; vertical-align: top; background-color: ivory;"><span class="math inline" style="box-sizing: border-box; margin: 0px; padding: 0px;"><em style="box-sizing: border-box; margin: 0px; padding: 0px;">N</em><sub style="box-sizing: border-box; margin: 0px; padding: 0px;">1</sub> ≈ <em style="box-sizing: border-box; margin: 0px; padding: 0px;">N</em><sub style="box-sizing: border-box; margin: 0px; padding: 0px;">0</sub> + <em style="box-sizing: border-box; margin: 0px; padding: 0px;">c</em></span></td></tr><tr class="even" style="box-sizing: border-box; margin: 0px; padding: 0px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: lightgrey;"><td style="box-sizing: border-box; margin: 0px; padding: 10px 8px; text-align: center; vertical-align: top; background-color: ivory;"><span class="math inline" style="box-sizing: border-box; margin: 0px; padding: 0px;"><em style="box-sizing: border-box; margin: 0px; padding: 0px;">O</em>(<em style="box-sizing: border-box; margin: 0px; padding: 0px;">n</em>)</span></td><td style="box-sizing: border-box; margin: 0px; padding: 10px 8px; text-align: center; vertical-align: top; background-color: ivory;"><span class="math inline" style="box-sizing: border-box; margin: 0px; padding: 0px;"><em style="box-sizing: border-box; margin: 0px; padding: 0px;">N</em><sub style="box-sizing: border-box; margin: 0px; padding: 0px;">1</sub> ≈ 2<em style="box-sizing: border-box; margin: 0px; padding: 0px;">N</em><sub style="box-sizing: border-box; margin: 0px; padding: 0px;">0</sub></span></td></tr><tr class="odd" style="box-sizing: border-box; margin: 0px; padding: 0px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: lightgrey;"><td style="box-sizing: border-box; margin: 0px; padding: 10px 8px; text-align: center; vertical-align: top; background-color: ivory;"><span class="math inline" style="box-sizing: border-box; margin: 0px; padding: 0px;"><em style="box-sizing: border-box; margin: 0px; padding: 0px;">O</em>(<em style="box-sizing: border-box; margin: 0px; padding: 0px;">n</em><sup style="box-sizing: border-box; margin: 0px; padding: 0px;">2</sup>)</span></td><td style="box-sizing: border-box; margin: 0px; padding: 10px 8px; text-align: center; vertical-align: top; background-color: ivory;"><span class="math inline" style="box-sizing: border-box; margin: 0px; padding: 0px;"><em style="box-sizing: border-box; margin: 0px; padding: 0px;">N</em><sub style="box-sizing: border-box; margin: 0px; padding: 0px;">1</sub> ≈ 4<em style="box-sizing: border-box; margin: 0px; padding: 0px;">N</em><sub style="box-sizing: border-box; margin: 0px; padding: 0px;">0</sub></span></td></tr><tr class="even" style="box-sizing: border-box; margin: 0px; padding: 0px; border-bottom-style: none;"><td style="box-sizing: border-box; margin: 0px; padding: 10px 8px; text-align: center; vertical-align: top; background-color: ivory;"><span class="math inline" style="box-sizing: border-box; margin: 0px; padding: 0px;"><em style="box-sizing: border-box; margin: 0px; padding: 0px;">O</em>(2<sup style="box-sizing: border-box; margin: 0px; padding: 0px;"><em style="box-sizing: border-box; margin: 0px; padding: 0px;">n</em></sup>)</span></td><td style="box-sizing: border-box; margin: 0px; padding: 10px 8px; text-align: center; vertical-align: top; background-color: ivory;"><span class="math inline" style="box-sizing: border-box; margin: 0px; padding: 0px;"><em style="box-sizing: border-box; margin: 0px; padding: 0px;">N</em><sub style="box-sizing: border-box; margin: 0px; padding: 0px;">1</sub> ≈ (<em style="box-sizing: border-box; margin: 0px; padding: 0px;">N</em><sub style="box-sizing: border-box; margin: 0px; padding: 0px;">0</sub>)<sup style="box-sizing: border-box; margin: 0px; padding: 0px;">2</sup></span></td></tr></tbody></table></div><div class="cell text-cell"><h2>Constant time</h2>
<p>There is one more use of Big-Oh notation that we require, which is to capture the case of a function whose asymptotic growth does <em>not</em> depend on its input! For example, consider the constant function <em>f</em>(<em>n</em>) = 10. This function doesn’t depend on its input, and so we say that it has <em>constant asymptotic behaviour</em>, writing <em>O</em>(1) to represent this.</p>
<p>In the context of running time, we would say that a particular function or method “runs in constant time” to say that its runtime doesn’t depend on the size of its input.</p>
<p>For example, our above discussion about index lookup in array-based Python lists can be summarized by saying that it is a <em>constant time operation</em>: looking up <code>lst[i]</code> takes time that does <em>not</em> depend on either <code>len(lst)</code> or <code>i</code> itself!</p>
</div><div class="cell text-cell"></div></div>
      <script>document.body.onkeyup = function(e) {
if (e.keyCode === 39) window.location.href = '4.1 Introduction to Linked Lists.html';
if (e.keyCode === 37) window.location.href = '3.3 Exceptions.html';
}</script>
    </body>
    </html>
  